function setup(){function e(e){return document.getElementById(e)}function t(e){return document.getElementsByClassName(e)}function a(e,t){n(e,t),e.className+=" "+t}function n(e,t){e.className=e.className.replace(RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)","g")," ").replace(/\s+/g," ").trim()}function o(e,t){e.className.match(RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)","g"))?n(e,t):a(e,t)}function l(){for(var e=gt/(pt.width-1),t=yt/(pt.height-1),a=ut[0],n=ut.alphaValue,o=0;o<pt.width;o++)for(var l=0;l<pt.height;l++)pt.data.set(Color.fn.array_convert([a,o*e,yt-l*t,n],Color.converters.matrix.hsv.rgb),4*(l*pt.width+o));ft.putImageData(pt,0,0),Ct=Color.Set.fn.readImageData(pt).to("hsv")}function s(){var e=(Ct.width,Ct.height),t=Ct.keyLength,a=Ct.size,e=ut[0],n=ut.alphaValue;if(Ct.data[0]!==e&&Ct.data[3]===n)for(var o=0;a>o;o++)Ct.data[o*t]=e;else if(Ct.data[0]===e&&Ct.data[3]!==n)for(var o=0;a>o;o++)Ct.data[o*t+3]=n;else if(Ct.data[0]!==e&&Ct.data[3]!==n)for(var o=0;a>o;o++)Ct.data[o*t]=e,Ct.data[o*t+3]=n;ft.putImageData(Ct.toImageData(),0,0)}function r(e){e.preventDefault();var t=e.clientX-this.parentNode.offsetLeft,a=0,n=this.parentNode.offsetWidth-this.offsetWidth;this.style.left=t+"px",scales=Color.modes.hsv,old=ut.duplicate(),this.offsetLeft<this.parentNode.offsetLeft+a?this.style.left=a+"px":this.offsetLeft>this.parentNode.offsetLeft+n&&(this.style.left=n+"px");var o=(this.offsetLeft-this.parentNode.offsetLeft)/(this.parentNode.offsetWidth-this.offsetWidth);switch(this.dataset.value=o,this.id){case"h":ut[0]=o*(scales.h.max-scales.h.min);break;case"s":ut[1]=o*(scales.s.max-scales.s.min);break;case"v":ut[2]=o*(scales.v.max-scales.v.min);break;case"a":ut.alphaRatio=o}"function"==typeof this.fn&&this.fn(),f(),D(),d(ut)}function i(e){if(0===e.button){var t=this;("h"===this.id||"a"===this.id)&&(t.fn=s);var a=t.style.backgroundColor;t.style.backgroundColor="rgba(255,255,255,0.9)",fn=r.bind(t),fn(e),document.addEventListener("mousemove",fn),document.addEventListener("mouseup",function(){document.removeEventListener("mousemove",fn),t.style.backgroundColor=a}),e.preventDefault()}}function c(e){e.preventDefault(),ut[1]=(e.clientX-mt.offsetLeft+document.body.scrollLeft)/(mt.width-1)*gt,ut[2]=(1-(e.clientY-mt.offsetTop+document.body.scrollTop)/(mt.height-1))*yt,f(),D(),d()}function d(a){a instanceof Color||(a=ut);t("color");u(a.grayscale()[0]),v(a),m(a),t("sel").length?L():document.body.style.backgroundColor=a.css(),e("load").value=a.hex(),e("icon").style.backgroundColor=a.rgb().css(),e("icon").title=(""+a.rgb(.1)+"\n"+a.hsl(.1)+"\n"+a.hsv(.1)+"\n"+a.cmyk(.1)+"\n"+a.xyz(.1)+"\n"+a.lab(.1)+"\n"+a.luv(.1)+"\n"+a.lch(.1)+"\n"+a.lms(.01)+"\n"+a.dkl(.1)).replace(/ +/g,"	").replace(/\(/g," 	(").replace(/,/g," 	,").toUpperCase(),p()}function h(t,a){e("pointer").style.top=a-e("pointer").offsetHeight/2+"px",e("pointer").style.left=t-e("pointer").offsetWidth/2+"px"}function u(t){e("pointer").style.border=t>.25?"2px solid rgba(0,0,0,0.6)":"2px solid rgba(255,255,255,0.4)"}function v(t){e("pointer").style.backgroundColor=t.css()}function m(t){var a=t.duplicate();e("h").parentNode.style.background=Color.fn.css_linear_gradient("to right",[0,60,120,180,240,300,360].map(function(e){return a[0]=e,a.duplicate()})),a=t.duplicate(),e("s").parentNode.style.background=Color.fn.css_linear_gradient("to right",[0,100].map(function(e){return a[1]=e,a.duplicate()})),a=t.duplicate(),e("v").parentNode.style.background=Color.fn.css_linear_gradient("to right",[0,100].map(function(e){return a[2]=e,a.duplicate()})),a=t.duplicate(),e("a").parentNode.style.background=Color.fn.css_linear_gradient("to right",[0,1].map(function(e){return a.alphaRatio=e,a.duplicate()}))}function f(){var t=Color.modes.hsv,a=ut[0]/(t.h.max-t.h.min),n=ut[1]/(t.s.max-t.s.min),o=ut[2]/(t.v.max-t.v.min),l=ut.alphaRatio;e("h").style.left=a*(e("h").parentNode.offsetWidth-e("h").offsetWidth)+"px",e("s").style.left=n*(e("s").parentNode.offsetWidth-e("s").offsetWidth)+"px",e("v").style.left=o*(e("v").parentNode.offsetWidth-e("v").offsetWidth)+"px",e("a").style.left=l*(e("a").parentNode.offsetWidth-e("a").offsetWidth)+"px",h(mt.offsetLeft+n*(mt.width-1),mt.offsetTop+(1-o)*(mt.height-1))}function p(){var t=Color.modes.hsv;e("hi").value=Color.math.number_truncate(ut[0],t.h.max,t.h.min,.1),e("si").value=Color.math.number_truncate(ut[1],t.s.max,t.s.min,.1),e("vi").value=Color.math.number_truncate(ut[2],t.v.max,t.v.min,.1),e("ai").value=Color.math.number_truncate(ut.alphaValue,t.alpha.max,t.alpha.min,.1)}function g(){var t=e("hi").value,a=e("si").value,n=e("vi").value,o=e("ai").value;ut[0]=""!==t&&isFinite(t)?+t:ut[0],ut[1]=""!==a&&isFinite(a)?+a:ut[1],ut[2]=""!==n&&isFinite(n)?+n:ut[2],ut.alphaValue=""!==o&&isFinite(o)?+o:ut.alphaValue,ut.truncate(.1),f(),D(),s(),d(),p()}function y(e){0===e.button&&(c(e),mt.addEventListener("mousemove",c,!1),mt.addEventListener("mouseup",C,!1),mt.addEventListener("mouseout",C,!1))}function C(){mt.removeEventListener("mousemove",c),mt.removeEventListener("mouseup",C),mt.removeEventListener("mouseout",C)}function b(e,a,n,o,l,s){var r=document.createElement("div"),i=t("color_col");o=o instanceof Color?o.duplicate():new Color(0,0,0,0),"number"==typeof e&&e<i.length&&e>=0?e=i[e>>0]:e instanceof HTMLElement||(e=S()),r.color=a.duplicate(),r.className="color left"+(t("color").length>t("sep").length?"":" sep"),r.appendChild(document.createElement("div")),r.appendChild(document.createElement("div")),e.insertBefore(r,e.lastChild);var c=r.lastChild,d=r.firstChild;d.appendChild(document.createElement("div")),c.appendChild(document.createElement("div")),c.appendChild(document.createElement("div")),c.className="name",d.className="pic";var h=d.firstChild,u=c.firstChild,v=c.lastChild;return h.className="pr",u.className="nl left",v.className="nr right",d.draggable=!0,"string"==typeof n?d.className+=" "+n:"number"==typeof n?d.style.height=n+"px":d.className+=" xs",d.style.backgroundColor=a.css(),d.title=(""+a.rgb(.1)+"\n"+a.hsl(.1)+"\n"+a.hsv(.1)+"\n"+a.cmyk(.1)+"\n"+a.xyz(.1)+"\n"+a.lab(.1)+"\n"+a.luv(.1)+"\n"+a.lch(.1)+"\n"+a.lms(.01)+"\n"+a.dkl(.1)).replace(/ +/g,"	").replace(/\(/g," 	(").replace(/,/g," 	,").toUpperCase(),u.innerHTML=l||"",u.style.color=o.hex(),u.style.backgroundColor=o.light_contrast("lch").grayscale("hsv").css(),u.title=s||"ORI: "+o.rgb(0).css(),v.innerHTML=a.hex(),v.title="Right click to copy hex",a.alphaRatio<1&&(h.innerHTML=Math.round(100*a.alphaRatio)+"%",h.style.color=a.light_contrast("lch").hex(),h.style.textShadow="0 0 2px "+a.light_contrast("lch").grayscale("hsv").light_contrast("hsl").hex(),h.style.backgroundColor=a.hex()),r.addEventListener("click",x.bind(r)),r.addEventListener("mouseover",P),r.addEventListener("mouseout",K),r.addEventListener("dragover",A),d.addEventListener("contextmenu",R.bind(r)),c.addEventListener("mousedown",ht),v.addEventListener("mousedown",j),K.call(r),r}function E(e){var t=e.color,a=e.lastChild,n=e.firstChild,o=n.firstChild,l=a.firstChild,s=a.lastChild;n.style.backgroundColor=t.css(),n.title=(""+t.rgb(.1)+"\n"+t.hsl(.1)+"\n"+t.hsv(.1)+"\n"+t.cmyk(.1)+"\n"+t.xyz(.1)+"\n"+t.lab(.1)+"\n"+t.luv(.1)+"\n"+t.lch(.1)+"\n"+t.lms(.01)+"\n"+t.dkl(.1)).replace(/ +/g,"	").replace(/\(/g," 	(").replace(/,/g," 	,").toUpperCase(),l.innerHTML="",l.title="",s.innerHTML=t.hex(),l.style.color="transparent",l.style.backgroundColor="transparent",t.alphaRatio<1?(o.innerHTML=Math.round(100*t.alphaRatio)+"%",o.style.color=t.light_contrast("lch").hex(),o.style.textShadow="0 0 2px "+t.light_contrast("lch").grayscale("hsv").light_contrast("hsl").hex(),o.style.backgroundColor=t.hex()):(o.innerHTML="",o.style.color="",o.style.textShadow="",o.style.backgroundColor="")}function L(){var e=document.createElement("style"),t=document.getElementById("style_sel"),a=vt.light_contrast("lch").hsv(0).grayscale().rgb(0).light_contrast("lch");t&&document.body.removeChild(t),e.id="style_sel",e.innerHTML=".color.sel > .pic { outline: 1px solid "+a.light_contrast("lch").css()+"; border: 1px solid "+a.css()+";}",document.body.appendChild(e)}function x(e){if(void 0!==e&&0===e.button){e.preventDefault(),e.stopPropagation();var l=performance.now();333>l-xt&&bt===this?(vt=this.color.hsv(0),document.body.style.backgroundColor=vt.css(),H(vt.hsv(0)),k()):this.className.match(/(?:^|\s+)sel(?:\s+|$)/)?(n(this,"sel"),t("sel").length||(H(vt.hsv(0)),vt=null)):(e.ctrlKey?vt||(vt=ut.duplicate()):t("sel").length?w():vt=ut.duplicate(),a(this,"sel"),e.target.className.match(/(?:^|\s+)button(?:\s+|$)/)||H(this.color.hsv(0))),xt=l,bt=this}else w(),vt||(vt=ut.duplicate()),o(this,"sel")}function N(){for(var e=t("color"),a=ut.rgb(),n=[],o=0;o<e.length;o++)a.compare_with(e[o].color.rgb())&&n.push(e[o]);return n}function k(){for(var e=t("color"),n=ut.rgb(),o=0;o<e.length;o++)n.compare_with(e[o].color.rgb())&&a(e[o],"sel");vt||(vt=ut.duplicate())}function _(){for(var e=t("color"),a=ut.rgb(),o=0;o<e.length;o++)a.compare_with(e[o].color.rgb())&&n(e[o],"sel");t("sel").length||(H(vt.hsv(0)),vt=null)}function w(){for(var e=t("sel");e.length>0;)n(e[0],"sel")}function D(){for(var e=t("sel"),a=0;a<e.length;a++)e[a].color=ut.duplicate(),E(e[a])}function T(){for(var e=t("color"),n=0;n<e.length;n++)a(e[n],"sel");vt||(vt=ut.duplicate())}function R(e){e&&2===e.button&&(e.preventDefault(),e.stopPropagation()),P.call(this),this.removeEventListener("mouseover",P),this.removeEventListener("mouseout",K),this.removeEventListener("contextmenu",R),this.getElementsByClassName("pic")[0].addEventListener("contextmenu",I)}function I(e){e&&2===e.button&&(e.preventDefault(),e.stopPropagation());var t=this.parentNode;K.call(t),t.addEventListener("mouseover",P),t.addEventListener("mouseout",K),t.addEventListener("contextmenu",R.bind(t)),this.removeEventListener("contextmenu",I)}function P(){a(this,"show")}function K(){n(this,"show")}function V(e){e.dataTransfer.effectAllowed="move",e.target.className&&e.target.parentNode.className.match(/(?:^|\s+)color(?:\s+|&)/)?(Et=e.target.parentNode,a(Et,"drag"),Et.style.background=Et.color.light_contrast().hue(180).adjust_alpha(-70).css(),Et.style.boxShadow="0 0 10px "+Et.color.light_contrast().reverse().css(),e.dataTransfer.setData("color",!0)):Et=null}function O(){Et&&(n(Et,"drag"),Et.style.background="",Et.style.boxShadow="",Et=null)}function A(e){e.preventDefault(),Lt=this}function M(e){e.preventDefault(),Et&&e.dataTransfer.getData("color")&&(e.clientY>Lt.offsetTop+3*Lt.offsetHeight/4&&Lt.nextSibling?Lt.parentNode.insertBefore(Et,Lt.nextSibling):Lt.parentNode.insertBefore(Et,Lt))}function H(e){e instanceof Color&&ut.restore(e),s(),m(ut),f(),d(ut)}function W(e,t){var a=b(e,ut.duplicate(),Nt);t&&(t.preventDefault(),t.stopPropagation(),t.ctrlKey?x.call(a,t):(w(),vt&&(H(vt.hsv(0)),vt=null)))}function U(a){var n=e("main");a=a||1;for(var o=0;a>o&&(!n.lastChild||n.offsetLeft+n.offsetWidth+n.lastChild.offsetWidth<=document.body.offsetWidth);o++){var l=document.createElement("div"),s=document.createElement("div");l.className="color_col left",s.className="color_add left",s.appendChild(document.createElement("div")),s.firstChild.draggable=!1,s.firstChild.textContent=" + ",l.appendChild(s),s.firstChild.addEventListener("click",W.bind(null,l)),s.addEventListener("dragover",A),n.appendChild(l)}return t("color_col")}function S(){for(var e=t("color_col"),a=e[0]||U()[0],n=1;n<e.length;n++)a.offsetHeight>e[n].offsetHeight&&(a=e[n]);return a}function B(){for(var e=t("color");e.length>0;)e[0].parentNode.removeChild(e[0]);vt&&(H(vt.hsv(0)),vt=null)}function z(){for(var e=t("sel");e.length>0;)e[0].parentNode.removeChild(e[0]);vt&&(H(vt.hsv(0)),vt=null)}function G(e){var t=document.createRange();t.selectNode(e);var a=window.getSelection();a.removeAllRanges(),a.addRange(t)}function $(e){G(e),document.execCommand("copy"),window.getSelection().removeAllRanges(),a(e,"copied"),e.removeEventListener("mousedown",j),setTimeout(function(){n(e,"copied"),setTimeout(function(){e.addEventListener("mousedown",j)},1e3)},1e3)}function j(e){2===e.button&&(e.preventDefault(),e.stopPropagation(),$(this))}function F(t){t.preventDefault();var a,n=e("load");a=Color.fn.parse(n.value.match(/^(?:(?:[0-9A-Fa-f]{3}){1,2})$/)?"#"+n.value:n.value),a&&H(a.hsv(.1))}function J(){e("load").value=ut.hex()}function X(){var e=t("color"),a=t("show");if(a.length===e.length)for(var n=0;n<e.length;n++)I.call(e[n].firstChild);else for(var n=0;n<e.length;n++)R.call(e[n])}function Y(){var e=N();if(e.length&&e.filter(function(e){return e.className.match(/(?:^|\s+)sel(?:\s+|$)/)}).length===e.length){var t=vt;_(),H(t.hsv(0))}else k()}function q(){t("sel").length<t("color").length?T():(w(),H(vt.hsv(0)),vt=null)}function Q(){var e=t("color"),o=t("sep");if(0===o.length)for(var l=0;l<e.length;l++)a(e[l],"sep");else for(var l=0;l<e.length;l++)n(e[l],"sep")}function Z(e){switch(typeof e){case"number":Nt=1>e?1:e;break;case"string":Nt=e;break;default:Nt="xs"}}function et(){var e=this.value,a=t("sel");!isNaN(e)&&e>0&&(e=+e),Z(e);for(var n=0;n<a.length;n++)a[n].getElementsByClassName("pic")[0].className="pic "+Nt}function tt(){for(var e=document.getElementsByName("size"),t=0;t<e.length;t++)e[t].addEventListener("click",et)}function at(e,t){var a=e.rgb().reverse(),n=b(null,a,Nt,e,"INV");t.ctrlKey&&x.call(n,t)}function nt(e,t){var a=S(),n=e.light_contrast("hsv"),o=e.light_contrast("hsl"),l=e.light_contrast("lch"),s=[];s.push(b(a,n,Nt,e,"CON-L (hsv)")),s.push(b(a,o,Nt,e,"CON-L (hsl)")),s.push(b(a,l,Nt,e,"CON-L (lch)")),t.ctrlKey&&s.forEach(function(e){x.call(e,t)})}function ot(e,t){vt||(vt=ut.duplicate());var a=S(),n=e.contrast_with(vt,"hsv"),o=e.contrast_with(vt,"hsl"),l=e.contrast_with(vt,"lch"),s=[];s.push(b(a,n,Nt,e,"CON-2 (hsv)")),s.push(b(a,o,Nt,e,"CON-2 (hsl)")),s.push(b(a,l,Nt,e,"CON-2 (lch)")),t.ctrlKey&&s.forEach(function(e){x.call(e,t)})}function lt(e,t){var a=S(),n=[];n.push(b(a,e.rgb(0).grayscale(),Nt,e,"GRA rgb")),n.push(b(a,e.hsv(0).grayscale(),Nt,e,"GRA hsv/cmyk")),n.push(b(a,e.hsl(0).grayscale(),Nt,e,"GRA hsl")),n.push(b(a,e.xyz(0).grayscale(),Nt,e,"GRA xyz")),n.push(b(a,e.lab(0).grayscale(),Nt,e,"GRA lab/luv/lch")),t.ctrlKey&&n.forEach(function(e){x.call(e,t)})}function st(e,t,a){var n=S(),o=Array(12),l=Color.adjusters.hue,s=0,r=[];t=l.available_modes.hasOwnProperty(t)?t:l.available_modes.hasOwnProperty(e.mode)?e.mode:l.default_mode;for(var i=0;i<o.length;i++){s=30*i,o[i]=e.duplicate().hue(s,t);var c="";switch(i){case 0:c="HUE";break;case 6:c="COM";break;case 1:case 11:c="ADJ";break;case 3:case 9:c="TET";break;case 4:case 8:c="TRI";default:c="HUE"}s-=s>180?360:0,r.push(b(n,o[i],Nt,e,c+" "+t+" ("+(s>0?"+":"")+s+")"+(0===i?" ORI":"")))}a.ctrlKey&&r.forEach(function(e){x.call(e,a)})}function rt(e,t,a){var n=S(),o=Array(11),l=Color.adjusters.lightness,s=[];t=l.available_modes.hasOwnProperty(t)?t:l.available_modes.hasOwnProperty(e.mode)?e.mode:l.default_mode;for(var r=l.available_modes[t],i=Color.modes[t][r],c=i.max-i.min,d=e[t](0)[r],h=d/(c/10)>>0,u=d%(c/10),v=0===u?10:9;v>=0;v--)o[v]=e.duplicate().lightness(10*(v-h),t),s.push(b(n,o[v],Nt,e,"LIG "+t+" ("+Math.round(u+10*v)+")"+(v===h?" ORI":"")));a.ctrlKey&&s.forEach(function(e){x.call(e,a)})}function it(e,t,a){var n=S(),o=Array(11),l=Color.adjusters.chroma,s=Color.adjusters.saturation,r=[];if("lch"!==t){t=s.available_modes.hasOwnProperty(t)?t:s.available_modes.hasOwnProperty(e.mode)?e.mode:s.default_mode;var i=s.available_modes[t]}else var i=l.available_modes[t];for(var c=Color.modes[t][i],d=c.max-c.min,h=e[t](!1)[i].value,u=h/(d/10)>>0,v=h%(d/10),m=0===v?10:9,f=0;m>=f;f++)o[f]="lch"===t?e.duplicate().chroma(10*(f-u),t):e.duplicate().saturation(10*(f-u),t),r.push(b(n,o[f],Nt,e,("lch"===t?"CHR ":"SAT ")+t+" ("+Math.round(v+10*f)+")"+(f===u?" ORI":"")));a.ctrlKey&&r.forEach(function(e){x.call(e,a)})}function ct(){for(var e,a=t("color_col"),n=[],o=0;o<a.length;o++){n[o]=[],e=a[o].getElementsByClassName("color");for(var l=0;l<e.length;l++)n[o].push(e[l].color.rgb(1e-4).serialize())}return JSON.stringify(n)}function dt(e){try{var a=JSON.parse(e);if(Array.isArray(a))for(var n=t("color_col"),o=0;o<a.length;o++)if(Array.isArray(a[o]))for(var l=0;l<a[o].length;l++){var s=new Color(a[o][l]);b(n[o%n.length],s,Nt)}}catch(r){throw Error("List loading failed.")}}function ht(e){return e.preventDefault(),e.stopPropagation(),!1}var ut=new Color("hsv",210,28.5,93.5),vt=null,mt=e("c"),ft=mt.getContext("2d"),pt=ft.createImageData(mt.width,mt.height),gt=Color.modes.hsv.s.range,yt=Color.modes.hsv.v.range,Ct=new Color.Set;e("h").parentNode.parentNode.addEventListener("mousedown",i.bind(e("h"))),e("s").parentNode.parentNode.addEventListener("mousedown",i.bind(e("s"))),e("v").parentNode.parentNode.addEventListener("mousedown",i.bind(e("v"))),e("a").parentNode.parentNode.addEventListener("mousedown",i.bind(e("a"))),e("c").addEventListener("mousedown",y,!1),e("c").addEventListener("dblclick",W.bind(null,null),!1);var bt,Et,Lt,xt=0;document.addEventListener("dragstart",V),document.addEventListener("dragend",O),document.addEventListener("drop",M);var Nt="";Z(),tt(),window.toList=ct,window.loadList=dt,e("main").addEventListener("contextmenu",ht,!1),e("form").addEventListener("submit",F),e("load").addEventListener("blur",J),e("hi").addEventListener("change",g),e("si").addEventListener("change",g),e("vi").addEventListener("change",g),e("ai").addEventListener("change",g),e("add").addEventListener("click",W.bind(null,null)),e("invert").addEventListener("click",at.bind(null,ut)),e("light_contrast").addEventListener("click",nt.bind(null,ut)),e("contrast_with").addEventListener("click",ot.bind(null,ut)),e("grayscale").addEventListener("click",lt.bind(null,ut)),e("hue_hsv").addEventListener("click",st.bind(null,ut,"hsv")),e("hue_lch").addEventListener("click",st.bind(null,ut,"lch")),e("saturation_hsv").addEventListener("click",it.bind(null,ut,"hsv")),e("saturation_hsl").addEventListener("click",it.bind(null,ut,"hsl")),e("chroma_lch").addEventListener("click",it.bind(null,ut,"lch")),e("lightness_hsv").addEventListener("click",rt.bind(null,ut,"hsv")),e("lightness_hsl").addEventListener("click",rt.bind(null,ut,"hsl")),e("lightness_lab").addEventListener("click",rt.bind(null,ut,"lab")),e("toggle_detail").addEventListener("click",X),e("toggle_sep").addEventListener("click",Q),e("toggle_sel").addEventListener("click",Y),e("toggle_sel_all").addEventListener("click",q),e("clear_sel").addEventListener("click",z),e("clear").addEventListener("click",B);var kt=!1,_t=0;document.addEventListener("keydown",function(e){46!==e.keyCode||t("sel").length<=0||"INPUT"===document.activeElement.tagName&&"text"===document.activeElement.type||(e.preventDefault(),z()),65!==e.keyCode||!e.ctrlKey||"INPUT"===document.activeElement.tagName&&"text"===document.activeElement.type||(e.preventDefault(),q(e)),68===e.keyCode&&e.ctrlKey&&(e.preventDefault(),X(e)),83===e.keyCode&&e.ctrlKey&&(e.preventDefault(),Q(e)),69===e.keyCode&&e.ctrlKey&&(e.preventDefault(),Y(e)),37!==e.keyCode||e.ctrlKey||"INPUT"===document.activeElement.tagName&&"text"===document.activeElement.type||ut[1]<=Color.modes.hsv.s.min||(e.preventDefault(),ut[1]-=1,ut[1]<Color.modes.hsv.s.min&&(ut[1]=Color.modes.hsv.s.min),f(),D(),d()),38!==e.keyCode||e.ctrlKey||"INPUT"===document.activeElement.tagName&&"text"===document.activeElement.type&&ut[2]<Color.modes.hsv.v.max||(e.preventDefault(),ut[2]+=1,ut[2]>Color.modes.hsv.v.max&&(ut[2]=Color.modes.hsv.v.max),f(),D(),d()),39!==e.keyCode||e.ctrlKey||"INPUT"===document.activeElement.tagName&&"text"===document.activeElement.type&&ut[1]<Color.modes.hsv.s.max||(e.preventDefault(),ut[1]+=1,ut[1]>Color.modes.hsv.s.max&&(ut[1]=Color.modes.hsv.s.max),f(),D(),d()),40!==e.keyCode||e.ctrlKey||"INPUT"===document.activeElement.tagName&&"text"===document.activeElement.type&&ut[2]>Color.modes.hsv.v.min||(e.preventDefault(),ut[2]-=1,ut[2]<Color.modes.hsv.v.min&&(ut[2]=Color.modes.hsv.v.min),f(),D(),d()),37!==e.keyCode||!e.ctrlKey||"INPUT"===document.activeElement.tagName&&"text"===document.activeElement.type||(e.preventDefault(),ut[0]>Color.modes.hsv.h.min&&(ut[0]-=1,ut[0]<Color.modes.hsv.h.min&&(ut[0]=Color.modes.hsv.h.min),kt?Math.abs(_t-ut[0])>Color.modes.hsv.h.range/3&&(_t=ut[0],s()):(kt=!0,_t=ut[0]),f(),D(),d())),39!==e.keyCode||!e.ctrlKey||"INPUT"===document.activeElement.tagName&&"text"===document.activeElement.type||(e.preventDefault(),ut[0]<Color.modes.hsv.h.max&&(ut[0]+=1,ut[0]>Color.modes.hsv.h.max&&(ut[0]=Color.modes.hsv.h.max),kt?Math.abs(_t-ut[0])>Color.modes.hsv.h.range/3&&(_t=ut[0],s()):(kt=!0,_t=ut[0]),f(),D(),d())),38!==e.keyCode||!e.ctrlKey||"INPUT"===document.activeElement.tagName&&"text"===document.activeElement.type||(e.preventDefault(),ut.alphaValue<Color.modes.hsv.alpha.max&&(ut.alphaValue+=1,ut.alphaValue>Color.modes.hsv.alpha.max&&(ut.alphaValue=Color.modes.hsv.alpha.max),kt?Math.abs(_t-ut.alphaValue)>Color.modes.hsv.alpha.range/3&&(_t=ut.alphaValue,s()):(kt=!0,_t=ut.alphaValue),f(),D(),d())),40!==e.keyCode||!e.ctrlKey||"INPUT"===document.activeElement.tagName&&"text"===document.activeElement.type||(e.preventDefault(),ut.alphaValue>Color.modes.hsv.alpha.min&&(ut.alphaValue-=1,ut.alphaValue<Color.modes.hsv.alpha.min&&(ut.alphaValue=Color.modes.hsv.alpha.min),kt?Math.abs(_t-ut.alphaValue)>Color.modes.hsv.alpha.range/3&&(_t=ut.alphaValue,s()):(kt=!0,_t=ut.alphaValue),f(),D(),d()))}),document.addEventListener("keyup",function(){kt&&(kt=!1,s())}),l(),m(ut),f(),d(ut),U(10)}window.addEventListener("load",setup,!1);